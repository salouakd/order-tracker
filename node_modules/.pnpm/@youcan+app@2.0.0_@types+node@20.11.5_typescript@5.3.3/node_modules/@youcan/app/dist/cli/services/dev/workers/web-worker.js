import { Worker, Color, System } from '@youcan/cli-kit';

class WebWorker extends Worker.Abstract {
    command;
    app;
    web;
    logger;
    constructor(command, app, web) {
        super();
        this.command = command;
        this.app = app;
        this.web = web;
        this.logger = new Worker.Logger('stderr', this.web.config.name || 'web', Color.blue);
    }
    async boot() {
    }
    async run() {
        const [cmd, ...args] = this.web.config.commands.dev.split(' ');
        return System.exec(cmd, args, {
            stdout: this.logger,
            signal: this.command.controller.signal,
            stderr: new Worker.Logger('stderr', this.web.config.name || 'web', Color.red),
        });
    }
}

export { WebWorker as default };
